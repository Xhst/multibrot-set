(()=>{"use strict";var t={461:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\nfloat a = float(iterations) / float(MAX_ITERATIONS);\n\nif (a < 0.0625) {\n    color = colors[0];\n} else if (a < 0.125) {\n    color = colors[1];\n} else if (a < 0.1875) {\n    color = colors[2];\n} else if (a < 0.25) {\n    color = colors[3];\n} else if (a < 0.3125) {\n    color = colors[4];\n} else if (a < 0.375) {\n    color = colors[5];\n} else if (a < 0.4375) {\n    color = colors[6];\n} else if (a < 0.5) {\n    color = colors[7];\n} else if (a < 0.5625) {\n    color = colors[8];\n} else if (a < 0.625) {\n    color = colors[9];\n} else if (a < 0.6875) {\n    color = colors[10];\n} else if (a < 0.75) {\n    color = colors[11];\n} else if (a < 0.8125) {\n    color = colors[12];\n} else if (a < 0.875) {\n    color = colors[13];\n} else if (a < 0.9375) {\n    color = colors[14];\n} else {\n    color = colors[15];\n}"},377:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\nfloat a = float(iterations) / float(MAX_ITERATIONS);\ncolor = vec3(a, a, a);"},375:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\nfloat a = float(iterations) / float(MAX_ITERATIONS);\n\nif (a < 0.0625) {\n    color = mix(colors[0], colors[1], a);\n} else if (a < 0.125) {\n    color = mix(colors[1], colors[2], a);\n} else if (a < 0.1875) {\n    color = mix(colors[2], colors[3], a);\n} else if (a < 0.25) {\n    color = mix(colors[3], colors[4], a);\n} else if (a < 0.3125) {\n    color = mix(colors[4], colors[5], a);\n} else if (a < 0.375) {\n    color = mix(colors[5], colors[6], a);\n} else if (a < 0.4375) {\n    color = mix(colors[6], colors[7], a);\n} else if (a < 0.5) {\n    color = mix(colors[7], colors[8], a);\n} else if (a < 0.5625) {\n    color = mix(colors[8], colors[9], a);\n} else if (a < 0.625) {\n    color = mix(colors[9], colors[10], a);\n} else if (a < 0.6875) {\n    color = mix(colors[10], colors[11], a);\n} else if (a < 0.75) {\n    color = mix(colors[11], colors[12], a);\n} else if (a < 0.8125) {\n    color = mix(colors[12], colors[13], a);\n} else if (a < 0.875) {\n    color = mix(colors[13], colors[14], a);\n} else {\n    color = mix(colors[14], colors[15], a);\n}"},931:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\niterations = iterations - (iterations / 16) * 16;\n\n// Calculate the normalized iteration count\nfloat normalizedIterations = float(iterations) + 1.0 - (log(log(length(z)) / log(P))) / log(P);\n\nint idx = int(normalizedIterations);\nfor (int i = 0; i < 16; i++) {\n    if (i == idx) {\n        color = mix(colors[i], colors[i + 1], fract(normalizedIterations));\n        break;\n    }\n}"},680:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\n#define PI 3.1415926538\n#define atan2(y, x) (mix(PI/2.0 - atan(x,y), atan(y,x), float(abs(x) > abs(y))))\n\nprecision mediump float;\n\nconst float P = @EXPONENT@;\nconst int MAX_ITERATIONS = @MAX_ITERATIONS@;\nconst float BAILOUT_RADIUS = @BAILOUT@;\n\nuniform vec2 resolution;\nuniform vec2 offset;\n\nuniform float scale;\n\nuniform vec3 colors[@COLORS_COUNT@];\n\n@UNIFORMS@\n\nvoid main() {\n    vec3 color = vec3(0.0, 0.0, 0.0);\n    vec2 scale2 = vec2(scale, scale * resolution.y / resolution.x);\n\n    @VARIABLES@\n    \n    @ITERATIONS_ALGORITHM@\n\n    @COLORING_ALGORITHM@\n\n    gl_FragColor = vec4(color, 1.0);\n}"},841:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\n// The power of the Multibrot set\n\nfloat x = z.x;\nfloat y = z.y;\n\nfloat xtemp;\n\nint iterations = 0;\n\nfor (int i = 0; i < MAX_ITERATIONS; i++) {\n    if (x*x + y*y > BAILOUT_RADIUS) {\n        // Exit the loop if the escape condition is met\n        break;\n    }\n\n    xtemp = pow(x * x + y * y, P / 2.0) * cos(P * atan2(y, x)) + position.x;\n    y = pow(x * x + y * y, P / 2.0) * sin(P * atan2(y, x)) + position.y;\n    x = xtemp; \n\n    z = vec2(x, y);\n\n    // Increment the iteration count\n    iterations++;\n}"},243:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\nuniform vec2 position;"},483:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\nvec2 z = (gl_FragCoord.xy - resolution.xy / 2.0) / resolution.y * scale2 + offset;"},916:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="\nvec2 position = (gl_FragCoord.xy - resolution.xy / 2.0) / resolution.y * scale2 + offset;\nvec2 z = vec2(0.0, 0.0);"},450:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const a="// Define the attribute for the position of the vertex\nattribute vec2 position;\n\nvoid main() {\n    // Set the position of the vertex in clip space\n    gl_Position = vec4(position, 0, 1);\n}"},750:function(t,e,o){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Application=void 0;const n=a(o(483)),i=a(o(916)),r=a(o(243)),s=a(o(841)),l=o(451),c=o(250),d=o(163),u=o(222),h=o(788),p=o(979);class f{constructor(){this.canvasContainer=document.getElementById("canvas-container");let t=Math.min(window.innerWidth/2,window.innerHeight),e=t,o=t;this.multibrot=new c.Canvas(this.canvasContainer,e,o),this.julia=new c.Canvas(this.canvasContainer,e,o),this.multibrotShader=new d.Shader,this.juliaShader=new d.Shader}start(){this.multibrot.init(),this.multibrot.canvasElement.id="multibrot",this.julia.init(),l.Settings.loadColorPalette(u.basePalette),new p.InputEvent(new h.Input(this)),this.draw()}draw(){this.setupShaders(),this.multibrot.draw(this.multibrotShader),this.julia.draw(this.juliaShader,l.Settings.getJuliaSeed())}setupShaders(){this.multibrotShader.updateExponent(l.Settings.getExponent()),this.multibrotShader.updateMaxIterations(l.Settings.getMaxIterations()),this.multibrotShader.updateBailOut(l.Settings.getBailOut()),this.multibrotShader.updateVariables(i.default),this.multibrotShader.updateIterationsAlgorithm(s.default),this.multibrotShader.updateColoringAlgorithm(l.Settings.getColoringAlgorithm()),this.multibrotShader.updateColors(l.Settings.getColorPalette()),this.juliaShader.updateExponent(l.Settings.getExponent()),this.juliaShader.updateMaxIterations(l.Settings.getMaxIterations()),this.juliaShader.updateBailOut(l.Settings.getBailOut()),this.juliaShader.updateUniforms(r.default),this.juliaShader.updateVariables(n.default),this.juliaShader.updateIterationsAlgorithm(s.default),this.juliaShader.updateColoringAlgorithm(l.Settings.getColoringAlgorithm()),this.juliaShader.updateColors(l.Settings.getColorPalette())}get multibrotCanvas(){return this.multibrot}get juliaCanvas(){return this.julia}}e.Application=f,(new f).start()},250:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0,e.Canvas=class{constructor(t,e,o){this.wrappedScale=4,this.wrappedOffset={x:0,y:0},this.parent=t,this.wrappedWidth=e,this.wrappedHeight=o}init(){this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.parent.appendChild(this.canvas)}draw(t,e=null){const o=this.canvas.getContext("webgl");if(!o)return void console.error("WebGL not supported");o.viewport(0,0,this.width,this.height),o.clear(o.COLOR_BUFFER_BIT),t.assembleProgramSource();let a=this.createShaderProgram(o,t.vertexShaderSource,t.fragmentShaderSource);this.setUpVertexBuffer(o,a),this.setUpUniforms(o,t,a,e),o.drawArrays(o.TRIANGLE_STRIP,0,4)}createShaderProgram(t,e,o){const a=this.createShader(t,t.VERTEX_SHADER,e),n=this.createShader(t,t.FRAGMENT_SHADER,o),i=t.createProgram();return t.attachShader(i,a),t.attachShader(i,n),t.linkProgram(i),t.useProgram(i),i}createShader(t,e,o){const a=t.createShader(e);return t.shaderSource(a,o),t.compileShader(a),a}setUpVertexBuffer(t,e){const o=t.getAttribLocation(e,"position"),a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(o),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0)}setUpUniforms(t,e,o,a=null){const n=t.getUniformLocation(o,"resolution"),i=t.getUniformLocation(o,"scale"),r=t.getUniformLocation(o,"offset"),s=t.getUniformLocation(o,"colors"),l=t.getUniformLocation(o,"position");if(n&&t.uniform2f(n,this.width,this.height),i&&t.uniform1f(i,this.wrappedScale),r&&t.uniform2f(r,this.wrappedOffset.x,this.wrappedOffset.y),s){const o=e.getColors().flatMap((t=>[t.r,t.g,t.b]));t.uniform3fv(s,o)}l&&(a||(a={x:0,y:0}),t.uniform2f(l,a.x,a.y))}toDataURL(){const t=this.canvas.getContext("webgl");return t.drawArrays(t.TRIANGLE_STRIP,0,4),this.canvas.toDataURL("image/png")}saveAsImage(t="fractal.png"){let e=document.createElement("a");e.target="_blank",e.download=t,e.href=this.toDataURL(),e.click()}getImageData(t=0,e=0,o=this.width,a=this.height){const n=this.canvas.getContext("webgl");let i=new Uint8Array(o*a*4);return n.readPixels(t,e,o,a,n.RGBA,n.UNSIGNED_BYTE,i),new ImageData(new Uint8ClampedArray(i.buffer),o,a)}get width(){return this.wrappedWidth}set width(t){this.wrappedWidth=t,this.canvas.width=t}get height(){return this.wrappedHeight}set height(t){this.wrappedHeight=t,this.canvas.height=t}get canvasElement(){return this.canvas}get scale(){return this.wrappedScale}set scale(t){this.wrappedScale=t}get offsetX(){return this.wrappedOffset.x}get offsetY(){return this.wrappedOffset.y}set offsetX(t){this.wrappedOffset.x=t}set offsetY(t){this.wrappedOffset.y=t}}},222:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interpolateColors=e.getLinearPalette=e.getRandomColor=e.basePalette=e.Color=void 0;class o{constructor(t,e,o){this.r=t,this.g=e,this.b=o}static fromHex(t){const e=t.replace("#","");return new o(parseInt(e.substring(0,2),16)/255,parseInt(e.substring(2,4),16)/255,parseInt(e.substring(4,6),16)/255)}static fromRGB(t,e,a){return new o(t/255,e/255,a/255)}static fromPercentage(t,e,a){return new o(t,e,a)}getHex(){return"#"+this.componentToHex(this.r)+this.componentToHex(this.g)+this.componentToHex(this.b)}componentToHex(t){console.log(255*t);const e=(255*t).toString(16);return 1==e.length?"0"+e:e}}function a(t,e,a){return o.fromRGB(t.r+(e.r-t.r)*a,t.g+(e.g-t.g)*a,t.b+(e.b-t.b)*a)}e.Color=o,o.BLACK=o.fromRGB(0,0,0),e.basePalette=[o.fromRGB(9,1,47),o.fromRGB(4,4,73),o.fromRGB(0,7,100),o.fromRGB(12,44,138),o.fromRGB(24,82,177),o.fromRGB(57,125,209),o.fromRGB(134,181,229),o.fromRGB(211,236,248),o.fromRGB(241,233,191),o.fromRGB(248,201,95),o.fromRGB(255,170,0),o.fromRGB(204,128,0),o.fromRGB(153,87,0),o.fromRGB(106,52,3),o.fromRGB(66,30,15),o.fromRGB(25,7,26)],e.getRandomColor=function(){return o.fromRGB(Math.random(),Math.random(),Math.random())},e.getLinearPalette=function(t,e,o){const n=[];for(let i=0;i<o;i++){const r=i/o;n.push(a(t,e,r))}return n},e.interpolateColors=a},788:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Input=e.CanvasType=void 0;const a=o(451);var n;!function(t){t.GLOBAL="",t.MULTIBROT="m",t.JULIA="j"}(n=e.CanvasType||(e.CanvasType={})),e.Input=class{constructor(t){this.application=t}redraw(){this.application.draw()}moveCanvas(t,e,o){const a=t=>{t.offsetY+=o*t.scale,t.offsetX+=e*t.scale};switch(t){case n.MULTIBROT:a(this.application.multibrotCanvas);break;case n.JULIA:a(this.application.juliaCanvas);break;case n.GLOBAL:a(this.application.multibrotCanvas),a(this.application.juliaCanvas)}this.redraw()}zoomCanvas(t,e){const o=t=>{t.scale-=Math.log1p(t.scale)*e};switch(t){case n.MULTIBROT:o(this.application.multibrotCanvas);break;case n.JULIA:o(this.application.juliaCanvas);break;case n.GLOBAL:o(this.application.multibrotCanvas),o(this.application.juliaCanvas)}this.redraw()}downloadImage(t){const e=(t,e)=>{t.saveAsImage(`${e}.png`)};switch(t){case n.MULTIBROT:e(this.application.multibrotCanvas,"multibrot");break;case n.JULIA:e(this.application.juliaCanvas,"julia");break;case n.GLOBAL:e(this.application.multibrotCanvas,"multibrot"),e(this.application.juliaCanvas,"julia")}}updateJuliaSeed(t,e){const o=this.application.multibrotCanvas.canvasElement.getBoundingClientRect(),n=this.application.multibrotCanvas.width,i=this.application.multibrotCanvas.height,r=this.application.multibrotCanvas.offsetX,s=this.application.multibrotCanvas.offsetY,l=this.application.multibrotCanvas.scale,c=l/n*(t-o.left-n/2)+r,d=l/n*(i-(e-o.top)-i/2)+s;a.Settings.updateJuliaSeed({x:c,y:d}),this.redraw()}}},979:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InputEvent=void 0;const a=o(788),n=o(451);e.InputEvent=class{constructor(t){this.MOVEMENT_STEP=.05,this.INTERVAL_MS=100,this.interval=null,this.input=t,this.registerEvents()}registerEvents(){document.addEventListener("mouseup",(()=>{this.interval&&clearInterval(this.interval)})),document.addEventListener("touchend",(()=>{this.interval&&clearInterval(this.interval)})),this.registerMovementEvents(),this.registerDownloadEvents(),this.registerJuliaSeedEvents(),this.registerButtonEvents()}registerMovementEvents(){for(const t of Object.values(a.CanvasType)){const e=t===a.CanvasType.GLOBAL?"":`${t}-`,o={"move-up":()=>this.input.moveCanvas(t,0,this.MOVEMENT_STEP),"move-down":()=>this.input.moveCanvas(t,0,-this.MOVEMENT_STEP),"move-right":()=>this.input.moveCanvas(t,this.MOVEMENT_STEP,0),"move-left":()=>this.input.moveCanvas(t,-this.MOVEMENT_STEP,0),"zoom-in":()=>this.input.zoomCanvas(t,this.MOVEMENT_STEP),"zoom-out":()=>this.input.zoomCanvas(t,-this.MOVEMENT_STEP)};for(const t in o){const a=document.getElementById(`${e}${t}`);a&&(a.addEventListener("click",(()=>o[t]())),a.addEventListener("mousedown",(()=>{o[t](),this.interval=setInterval((()=>o[t]()),this.INTERVAL_MS)})),a.addEventListener("touchstart",(()=>{o[t](),this.interval=setInterval((()=>o[t]()),this.INTERVAL_MS)})))}}}registerDownloadEvents(){for(const t of Object.values(a.CanvasType)){const e=t===a.CanvasType.GLOBAL?"":`${t}-`,o=document.getElementById(`${e}download`);o&&o.addEventListener("click",(()=>this.input.downloadImage(t)))}}registerJuliaSeedEvents(){const t=this.input.application.multibrotCanvas.canvasElement;t.addEventListener("click",(t=>{this.input.updateJuliaSeed(t.clientX,t.clientY)})),t.addEventListener("touchstart",(t=>{this.input.updateJuliaSeed(t.touches[0].clientX,t.touches[0].clientY)}))}registerButtonEvents(){document.getElementById("redraw-btn").addEventListener("click",(()=>{this.input.redraw()})),document.getElementById("side-by-side").addEventListener("change",(()=>{n.Settings.toggleSideBySide()})),document.getElementById("color-alg").addEventListener("change",(()=>{this.input.redraw()}))}}},451:function(t,e,o){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=void 0;const n=a(o(377)),i=a(o(461)),r=a(o(375)),s=a(o(931)),l=o(222);e.Settings=class{static getExponent(){return parseFloat(document.getElementById("exponent").value)}static getMaxIterations(){return parseInt(document.getElementById("max-iterations").value)}static getBailOut(){return parseFloat(document.getElementById("bail-out").value)}static getColoringAlgorithm(){let t;switch(document.getElementById("color-alg").value){default:case"0":t=n.default;break;case"1":t=i.default;break;case"2":t=r.default;break;case"3":t=s.default}return t}static getJuliaSeed(){return{x:parseFloat(document.getElementById("julia-x").value),y:parseFloat(document.getElementById("julia-y").value)}}static updateJuliaSeed(t){document.getElementById("julia-x").value=t.x.toString(),document.getElementById("julia-y").value=t.y.toString()}static toggleSideBySide(){let t=document.getElementById("canvas-container");document.getElementById("side-by-side").checked?t.classList.remove("flex-column"):t.classList.add("flex-column")}static loadColorPalette(t){for(let e=0;e<t.length;e++){let o=t[e],a=document.getElementById(`color-${e}`);console.log(o.getHex()),a.value=o.getHex()}}static getColorPalette(){let t=[];for(let e=0;e<16;e++){let o=document.getElementById(`color-${e}`);t.push(l.Color.fromHex(o.value))}return t}}},163:function(t,e,o){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Shader=void 0;const n=a(o(680)),i=a(o(450)),r=o(222);e.Shader=class{constructor(){this.shaderOptions={exponent:2,maxIterations:100,bailOut:2,colors:[r.Color.BLACK],uniforms:"",variables:"",iterationsAlgorithm:"",coloringAlgorithm:""}}updateExponent(t){this.shaderOptions.exponent=t}updateMaxIterations(t){this.shaderOptions.maxIterations=t}updateBailOut(t){this.shaderOptions.bailOut=t}updateColors(t){this.shaderOptions.colors=t}updateUniforms(t){this.shaderOptions.uniforms=t}updateVariables(t){this.shaderOptions.variables=t}updateIterationsAlgorithm(t){this.shaderOptions.iterationsAlgorithm=t}updateColoringAlgorithm(t){this.shaderOptions.coloringAlgorithm=t}assembleProgramSource(){this.wrappedFragmentShaderSource=n.default.replace("@EXPONENT@",this.shaderOptions.exponent.toFixed(2).toString()).replace("@MAX_ITERATIONS@",this.shaderOptions.maxIterations.toString()).replace("@BAILOUT@",this.shaderOptions.bailOut.toFixed(2).toString()).replace("@COLORS_COUNT@",this.shaderOptions.colors.length.toString()).replace("@UNIFORMS@",this.shaderOptions.uniforms).replace("@VARIABLES@",this.shaderOptions.variables).replace("@ITERATIONS_ALGORITHM@",this.shaderOptions.iterationsAlgorithm).replace("@COLORING_ALGORITHM@",this.shaderOptions.coloringAlgorithm),this.wrappedVertexShaderSource=i.default}getColors(){return this.shaderOptions.colors}get fragmentShaderSource(){return this.wrappedFragmentShaderSource}get vertexShaderSource(){return this.wrappedVertexShaderSource}}}},e={};function o(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,o),i.exports}o.d=(t,e)=>{for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(750)})();